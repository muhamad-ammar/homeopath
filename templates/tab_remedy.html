{% extends 'base.html'%}

{% block title %}
 Symptoms | Remedies
{% endblock title %}
{% block content %}
<style>
    #ids
    {
        display: none;
    }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js" defer></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="  crossorigin="anonymous" defer></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="  crossorigin="anonymous" defer></script>

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>#trs-hd,.bill-header,.warning.no-result{text-align:center}.bill-header{font-size:12px}.form-control:focus{border-color:#25476a;outline:0;-webkit-box-shadow:none;box-shadow:none}.bill-header.cs{background-color:#25476a;color:#fff}.no-result,.results tr[visible=false]{display:none}.counter{padding:8px;color:#ccc}.fa.fa-warning{font-size:18px;color:red}.search.form-control{border-radius:0!important}.search-table-col{margin-top:100px}</style>
<header class="masthead text-white text-center" style="background: url('https://res.cloudinary.com/ammar992/image/upload/v1630916243/Untitled_design_8_qdhyql.png ') no-repeat center center; padding: 5% 5% 5% 5%;">
    <div class="masthead-content">
        <div class="container">
            <h1 class="masthead-heading mb-0">Go Back to Homepage</h1><a class="btn rounded-pill mt-5" role="button" href="{% url 'home' %}" style="background-color: #d84b6b; color : white;width: 20%;height: 15%px;font-size: 22px;">Home</a></div>
    </div>
    <div class="container">
        <br>
        <br>
        <div class="col-md-10 col-lg-8 col-xl-7 mx-auto">
            <form id='form'>
     
                <input type="text" id='keyword' placeholder="e.g. Abrupt">
                
                <button type='submit' id='btn' >Find</button>
            </form>

        </div>
        
    </div>
</header>
  
    <!-- {% include 'tableform.html' %} -->
    <div class="container">
        <div class="col-md-12 search-table-col">
            <div class="table-responsive table-bordered table table-hover table-bordered results">
                <table class="table table-bordered table-hover" id="table1">
                    <thead class="bill-header cs">
                        <tr>
                            <th id="trs-hd" class="col-lg-2">Rubric</th>
                            <th id="trs-hd" class="col-lg-3">Remedies</th>
                            <th id="trs-hd" class="col-lg-1">Add this </th>
                           
                            
                        </tr>
                    </thead>
                    <tbody id='tbody1'>
                        <!-- {% for x in sym %} 
    
                        <tr id='{{x.2}}'>                            
                            <td >{{x.0}}</td>
                            <td >{{x.1}}</td>
                            <td id='useless'>                            
                                <div id="abc">
                                <input type="submit" class="btn btn-success" id='{{x.2}}' value='Add this' name="Hello"> 
                                    </div>
                            </td>
                        </tr>
    
                        {% endfor %}-->
                    </tbody> 
                </table>
                
            </div>
        </div>
    </div>
    <div id='hello'></div>
    
    <div class="container">
        <form id="repoform">
            <input type="text" id="ids">
            <input type='submit' id='repo' value="Repotise">
        </form>
        <div class="col-md-12 search-table-col">
            <div class="table-responsive table-bordered table table-hover table-bordered results">
                <table class="table table-bordered table-hover" id="table2">
                    <thead class="bill-header cs">
                        <tr>
                            <th id="trs-hd" class="col-lg-2">Rubric</th>
                            <th id="trs-hd" class="col-lg-3">Remedies</th>
                            
                        </tr>
                    </thead>
                    <tbody >
                    
                    </tbody>
                </table>
                
            </div>
        </div>
    </div>
    <div class="container">
        <div class="col-md-12 search-table-col">
            <div class="table-responsive d table table-hover  results">
                <table class="table  table-hover" id="table2">
                    <form method='POST' action="." enctype="multipart/form-data" id="patientform">
                        {% csrf_token %}
                        <thead class="bill-header cs">
                            <tr>
                                <th colspan="2">Patient Form</th>
                            </tr>
                        </thead>
                    <tbody >
                    <tr>
                        <td class="col-lg-2">Symptoms :</td>
                        <td>{{pForm.symptom}}</td>
                    </tr>
                    <tr>
                        <td class="col-lg-2">Remedy Given :</td>
                        <td>{{pForm.remedy_given}}</td>
                    </tr><tr>
                        <td class="col-lg-2">Patient Name :</td>
                        <td>{{pForm.patient_name}}</td>
                    </tr><tr>
                        <td class="col-lg-2">Date :</td>
                        <td> {{pForm.date}}</td>
                    </tr>
                    <tr>
                        <td colspan="2">
                    <input id="btn" class="btn-success" style="margin-top:20px;" type="submit" value="Save this">
                    </td>
                    </tr>
                    </form>
                    </tbody>
                </table>
                
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="  crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>


<script>
    
        $(document).on('click','.abc button',function() {
        
        var me = $(this).attr('id');
        
        $( "#ids" ).val( function( index, val ) {
            console.log('Good');
        return val + ","+ me.toString();
            });
        
        
        $(this).prop('disabled', true);
        $("#"+me).clone().appendTo("#table2");   
        $("#table2 tr").find("td:eq(2)").remove();     
            
        });
    // {% comment %} $('.abc button').bind("click",function(){
    //                 alert("ok");
    //     var me = $(this).attr('id');
    //     alert(me);
    //     $(this).prop('disabled', true);
    //     $("#"+me).clone().appendTo("#table2");   
    //     $("#table2 tr").find("td:eq(2)").remove();
    //  }); {% endcomment %}
    $(document).on('submit', '#form',function (e) {
        console.log('1');
        var input = $('#keyword').val();
        console.log('1',input);
        e.preventDefault();
        console.log('1');
        $.ajax({
            type:'GET',
            url:"{% url 'search' %}",
            data: {
              'inputValue': input,
              
              
            },
            success: function (data) {
                $("#tbody1").html(data);
            }
          });
          console.log('Done');
        });
        </script>

        <script>
        $(document).on('submit', '#repoform',function (e){
        console.log('22');
        var id_data = $('#ids').val();
        console.log(id_data);
        // console.log('1',input);
        e.preventDefault();
        console.log('happy');
        $.ajax({
            type:'GET',
            url:"{% url 'repo' %}",
            data: {
              'id_data': id_data,
            },
            success: function (data) {
                console.log(data);
                
            }
          });
          console.log('Done');
        });


    
    </script>     
   
    <script>
        // {% comment %} $(document).ready(function(){
        //     alert('loading');

        // }); {% endcomment %}
        </script>

{% endblock content %}